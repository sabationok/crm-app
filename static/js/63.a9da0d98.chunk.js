"use strict";(self.webpackChunkcrm_app=self.webpackChunkcrm_app||[]).push([[63],{6063:function(e,n,t){t.d(n,{Z:function(){return ee}});var i=t(1413),o=t(885),a=t(2791),r=t(9838),c=t(9107);var s=t(5985),l={filterContainer:"BlockSearch_filterContainer__Nu+uf",filterForm:"BlockSearch_filterForm__iPIpw",customFounder:"BlockSearch_customFounder__WBHkw",inputFounder:"BlockSearch_inputFounder__o55Bv",customSelect:"BlockSearch_customSelect__rAeb1",isOpen:"BlockSearch_isOpen__9lhaC",selectList:"BlockSearch_selectList__j6QIs",inputParam:"BlockSearch_inputParam__anOuU",selectItem:"BlockSearch_selectItem__5pGfS",button:"BlockSearch_button__VOCQW",notification:"BlockSearch_notification__tXPeC"},u=t(184),d=function(e){var n=(0,r.rL)().tableTitles,t=void 0===n?[]:n,d=(0,a.useState)(""),m=(0,o.Z)(d,2),f=m[0],h=m[1],v=(0,a.useState)({name:""}),_=(0,o.Z)(v,2),p=_[0],k=_[1],x=(0,a.useState)(!1),Z=(0,o.Z)(x,2),j=Z[0],g=Z[1],w=(0,a.useState)([]),C=(0,o.Z)(w,2),S=C[0],B=C[1],I=[l.customSelect,j&&l.isOpen].join(" ");function y(){g(!j)}return(0,a.useEffect)((function(){0!==t.length&&B(function(e){var n=e.searchParam,t=void 0===n?"":n,i=e.searchQuery,o=void 0===i?null:i,a=e.data;return(void 0===a?[]:a).filter((function(e){return"number"===typeof e[t]?!(o&&!e[t].toString().toLowerCase().includes(o.toLowerCase())):"string"!==typeof e[t]||!(o&&!e[t].toLowerCase().includes(o.toLowerCase()))}))}({searchParam:"name",searchQuery:p.name,data:t.filter((function(e){return(null===e||void 0===e?void 0:e.search)&&(null===e||void 0===e?void 0:e.visible)}))}))}),[p,t]),(0,a.useEffect)((function(){""===!f&&console.log(f)}),[f]),(0,a.useEffect)((function(){""===!p.name&&console.log(p.name)}),[p]),(0,u.jsx)("div",{className:l.filterContainer,children:(0,u.jsxs)("form",{className:l.filterForm,onSubmit:function(e){!function(e){e.preventDefault(),f&&p.name?s.Am.info("\u0412\u0438 \u0448\u0443\u043a\u0430\u043b\u0438: '".concat(f,"' \u0441\u0435\u0440\u0435\u0434 '").concat(p.name,"'")):s.Am.error("\u041d\u0435 \u0432\u0432\u0435\u0434\u0435\u043d\u043e \u0443\u0441\u0456\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0456\u0432 \u043f\u043e\u0448\u0443\u043a\u0443")}(e)},children:[(0,u.jsxs)("div",{className:I,onClick:y,children:[(0,u.jsx)("input",{className:l.inputParam,type:"text",placeholder:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440",value:p.name,onChange:function(e){var n=e.target;k((0,i.Z)((0,i.Z)({},p),{},{name:n.value}))}}),(0,u.jsx)("ul",{className:l.selectList,children:S.map((function(e){return(0,u.jsx)("li",{className:l.selectItem,"data-title":e.dataTitle,onClick:function(n){!function(e){e.evt;var n=e.item;k(n),y()}({evt:n,item:e})},children:e.name},e.id)}))})]}),(0,u.jsx)("div",{className:l.customFounder,children:(0,u.jsx)("input",{className:l.inputFounder,type:"text",name:"searchQuery",value:f,placeholder:"\u041f\u043e\u0448\u0443\u043a",onChange:function(e){!function(e){var n=e.target;h(n.value)}(e)}})}),(0,u.jsx)("button",{className:l.button,type:"submit",children:(0,u.jsx)(c.Z,{iconId:"search",size:"24px"})})]})})},m=t(8586),f="BlockActions_btn__eIOIX",h=function(){var e=(0,r.rL)(),n=e.isModalOpen,t=e.handleToggleModal;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(m.Z,{iconId:n?"close":"actions-h",size:"100%",iconSize:"24px",className:f,onClick:t})})},v="BlockHeaderSearch_header__fq2h1",_="BlockHeaderSearch_headerWithSearch__Vnm1m",p="BlockHeaderSearch_Light__qD5Ew",k="BlockHeaderSearch_Dark__OoJa3",x="BlockHeaderSearch_title__yFzIH",Z=function(){var e=(0,r.rL)(),n=e.title,t=void 0===n?"Title":n,i=e.iconId,o=void 0===i?"info":i,a=e.isSearch,s=e.isDarkTheme,l=e.actions,m=e.headerStyles,f=e.headerClassName;return(0,u.jsxs)("div",{className:[a?_:v,s?k:p,f].join(" "),style:m,children:[(0,u.jsx)(c.Z,{iconId:o,size:"24px"}),a&&(0,u.jsx)(d,{}),t&&(0,u.jsx)("span",{className:x,children:(0,u.jsx)("span",{title:t,children:t})}),l&&(0,u.jsx)(h,{})]})},j="BlockModal_Backdrop__9xNj8",g="BlockModal_BackdropOpen__GX7Gb",w="BlockModal_Container__CkP5W",C="BlockModal_actionsList__-VfsE",S=function(e){e.title;var n=e.children,t=(0,r.rL)(),i=t.iconId,o=t.isModalOpen,c=t.handleToggleModal;return(0,a.useEffect)((function(){function e(n){if(console.log("first"),"Escape"===n.code)return c(),void window.removeEventListener("keydown",e)}if(o){if(!o)return function(){window.removeEventListener("keydown",e)};window.addEventListener("keydown",e)}else window.removeEventListener("keydown",e)}),[c,o]),(0,u.jsx)("div",{className:o?g:j,onClick:function(e){e.target===e.currentTarget&&c()},children:(0,u.jsx)("div",{className:w,children:(0,u.jsx)("div",{className:C,id:"".concat(i,"-modal"),children:n})})})},B=t(1747),I=function(e){var n=e.action,t=(0,r.rL)().blockTitle;return(0,u.jsx)(B.Z,(0,i.Z)((0,i.Z)({},n),{},{onClick:function(){navigator.clipboard.writeText(t),s.Am.info('\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e \u043a\u043e\u043f\u0456\u044e "'.concat(t,'"'))}}))},y=t(5861),N=t(4687),F=t.n(N),L=t(2960),b=function(e){var n=e.action,t=(0,L.d$)().appNotify;function o(){return(o=(0,y.Z)(F().mark((function e(){var n,i;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="".concat(window.location,"/"),console.log(n),i={title:"\u041f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044c",text:"\u041f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044c",url:n};try{navigator.share(i),t.success(i.title,"".concat(i.text,", ").concat(i.url))}catch(o){console.log(o),s.Am.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(o)),t.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043d\u0430\u0434\u0441\u0438\u043b\u0430\u043d\u043d\u0456","".concat(o))}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,u.jsx)(B.Z,(0,i.Z)((0,i.Z)({},n),{},{onClick:function(){return o.apply(this,arguments)}}))},T=function(e){var n=e.action;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(B.Z,(0,i.Z)((0,i.Z)({},n),{},{onClick:function(e){}}))})},P=function(e){var n=e.action,t=(0,r.rL)().title,o=(0,L.d$)().appNotify;return(0,u.jsx)(B.Z,(0,i.Z)((0,i.Z)({},n),{},{onClick:function(){o.info("\u0412\u0438\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445","\u0412\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u043b\u0438 \u0434\u0430\u043d\u0456 \u0456\u0437 \u0431\u043b\u043e\u043a\u0443 ".concat(t,"."))}}))},M=function(e){var n=e.action;return(0,u.jsx)(B.Z,(0,i.Z)({},n))},z=function(e){var n=e.action;return(0,u.jsx)(B.Z,(0,i.Z)({},n))},A=function(e){var n=e.action;function t(){return(t=(0,y.Z)(F().mark((function e(){var n;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="".concat(window.location),navigator.clipboard.writeText(n),s.Am.info("\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f \u0441\u043a\u043e\u043f\u0456\u0439\u043e\u0432\u0430\u043d\u0435 \u0434\u043e \u0431\u0443\u0444\u0435\u0440\u0443 \u043e\u0431\u043c\u0456\u043d\u0443");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,u.jsx)(B.Z,(0,i.Z)((0,i.Z)({},n),{},{onClick:function(){return t.apply(this,arguments)}}))},E=function(e){var n=e.action,t=(0,r.rL)().handleToggleBlockSearch;return(0,u.jsx)(B.Z,(0,i.Z)((0,i.Z)({},n),{},{onClick:t}))},O=function(e){var n=e.action;return(0,u.jsx)(B.Z,(0,i.Z)({},n))},H=function(e){var n=e.action;return(0,u.jsx)(B.Z,(0,i.Z)({},n))},Q=function(e){var n=e.action,t=(0,r.rL)().deleteAction;return t&&(0,u.jsx)(B.Z,(0,i.Z)((0,i.Z)({},n),{},{onClick:t}))},D=function(e){var n=e.action;return(0,u.jsx)(B.Z,(0,i.Z)((0,i.Z)({},n),{},{onClick:function(e){window.location.reload()}}))},W=function(e){var n=e.action,t=(0,r.rL)(),o=t.isFullPageMode,a=t.actionToglleFullPageMode;return a&&(0,u.jsx)(B.Z,(0,i.Z)((0,i.Z)({},n),{},{iconId:o?"zoomMinus":"zoomPlus",onClick:a}))},V=function(e){var n=e.arr,t=void 0===n?[]:n,o={link:A,search:E,filter:z,copy:I,share:b,print:T,export:P,import:M,edit:O,delete:Q,create:H,refresh:D,zoom:W},a=(0,u.jsx)(u.Fragment,{});return(0,u.jsx)(u.Fragment,{children:t.map((function(e){return o[e.name]?(a=o[e.name],(0,u.jsx)(a,(0,i.Z)({action:e},e),e.name)):(0,u.jsx)(B.Z,(0,i.Z)({},e),e.name)}))})},X=t(6887),G=t(9434),q=t(6351),J="Block_block__l4rYQ",R="Block_blockDark__wuUze",U="Block_footer__0j8tQ",$="Block_overflow__I1+3b",Y="Block_content__VVaX5",K="Block_inWork__m6rkC",ee=function(e){var n=e.children,t=e.footerChildren,c=e.title,l=void 0===c?"Title":c,d=e.iconId,m=void 0===d?"info":d,f=e.footer,h=void 0===f||f,v=e.header,_=void 0===v||v,p=e.style,k=void 0===p?{}:p,x=e.headerStyles,j=void 0===x?{}:x,g=e.className,w=void 0===g?"":g,C=e.ActionsComp,B=e.actions,I=(0,a.useState)(!1),y=(0,o.Z)(I,2),N=y[0],F=y[1],L=(0,a.useState)(),b=(0,o.Z)(L,2),T=b[0],P=b[1],M=(0,G.v9)(q.hO).isDarkTheme,z=(0,a.useState)(!1),A=(0,o.Z)(z,2),E=A[0],O=A[1],H=[M?R:J,w].join(" "),Q=E?{gridColumn:"1/11",gridRow:"1/11",zIndex:"10"}:{};var D={isSearch:N,isDarkTheme:M,isModalOpen:T,isFullPageMode:E},W={handleToggleBlockSearch:function(){F(!N)},handleToggleModal:function(){P(!T)},actionToglleFullPageMode:function(){O(!E),s.Am.info("\u0412\u0438\u0433\u043b\u044f\u0434 \u0431\u043b\u043e\u043a\u0443 \u0437\u043c\u0456\u043d\u0435\u043d\u043e ".concat(E))}},ee=(0,a.useMemo)((function(){switch(B){case"primary":return X.Z.actionsPrimary;case"withFilter":return X.Z.actionsWithFilter;default:return[]}}),[B]);return console.log("block '".concat(l,"'inicialize")),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.ZP,(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},e),W),D),{},{children:(0,u.jsxs)("div",{className:H,style:(0,i.Z)((0,i.Z)({},k),Q),children:[_&&(0,u.jsx)(Z,{style:j}),(0,u.jsxs)("div",{className:Y,id:m,children:[(0,u.jsxs)("div",{className:$,children:[n,!n&&(0,u.jsx)("div",{className:K,children:(0,u.jsx)("span",{children:"In work ..."})})]}),(0,u.jsxs)(S,{title:'\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0456 \u0434\u0456\u0457 \u0431\u043b\u043e\u043a\u0443 "'.concat(l,'"'),children:[ee.length>0&&(0,u.jsx)(V,{arr:ee}),C&&(0,u.jsx)(C,{})]})]}),h&&(0,u.jsx)("div",{className:U,children:t})]})}))})}},1747:function(e,n,t){t.d(n,{Z:function(){return s}});t(2791);var i=t(8586),o="Action_actionBtn__1HEir",a="Action_listItem__BvVX7",r="Action_actionTitle__nQJRs",c=t(184),s=function(e){e.name;var n=e.status,t=void 0===n||n,s=e.iconId,l=void 0===s?"close":s,u=e.title,d=void 0===u?"title":u,m=e.onClick;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:a,children:[(0,c.jsx)(i.Z,{iconId:l,size:"100%",iconSize:"28px",className:o,onClick:m,disabled:!t}),(0,c.jsx)("span",{className:r,children:d})]})})}},9838:function(e,n,t){t.d(n,{rL:function(){return s}});var i=t(1413),o=t(2791),a=t(6887),r=t(184),c=(0,o.createContext)(),s=function(){return(0,o.useContext)(c)};n.ZP=function(e){return(0,r.jsx)(c.Provider,{value:(0,i.Z)((0,i.Z)({},e),a.Z),children:e.children})}},6887:function(e,n){var t={actionsPrimary:[{name:"link",title:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f",iconId:"link",status:!0},{name:"share",title:"\u041f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044c",iconId:"share",status:!0},{name:"zoom",title:"\u0412\u0438\u0433\u043b\u044f\u0434",status:!0},{name:"export",title:"\u0415\u043a\u0441\u043f\u043e\u0440\u0442",iconId:"upload",status:!1},{name:"import",title:"\u0406\u043c\u043f\u043e\u0440\u0442",iconId:"download",status:!1},{name:"delete",title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",iconId:"delete",status:!0}],actionsWithFilter:[{name:"search",title:"\u041f\u043e\u0448\u0443\u043a",iconId:"search",status:!0},{name:"filter",title:"\u0424\u0456\u043b\u044c\u0442\u0440",iconId:"filter-off",status:!1},{name:"link",title:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f",iconId:"link",status:!0},{name:"share",title:"\u041f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044c",iconId:"share",status:!0},{name:"zoom",title:"\u0412\u0438\u0433\u043b\u044f\u0434",status:!0},{name:"refresh",title:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438",iconId:"refresh",status:!0},{name:"print",title:"\u0414\u0440\u0443\u043a",iconId:"print",status:!1},{name:"export",title:"\u0415\u043a\u0441\u043f\u043e\u0440\u0442",iconId:"upload",status:!1},{name:"import",title:"\u0406\u043c\u043f\u043e\u0440\u0442",iconId:"download",status:!1}]};n.Z=t}}]);
//# sourceMappingURL=63.a9da0d98.chunk.js.map