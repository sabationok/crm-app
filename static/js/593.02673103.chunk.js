"use strict";(self.webpackChunkcrm_app=self.webpackChunkcrm_app||[]).push([[593],{593:function(e,t,n){n.d(t,{Z:function(){return ee}});var i=n(1413),a=n(885),c=n(2791),o=n(3579),r=n(9107);var s=n(5985),l={filterContainer:"BlockSearch_filterContainer__Nu+uf",filterForm:"BlockSearch_filterForm__iPIpw",customFounder:"BlockSearch_customFounder__WBHkw",inputFounder:"BlockSearch_inputFounder__o55Bv",customSelect:"BlockSearch_customSelect__rAeb1",isOpen:"BlockSearch_isOpen__9lhaC",selectList:"BlockSearch_selectList__j6QIs",inputParam:"BlockSearch_inputParam__anOuU",selectItem:"BlockSearch_selectItem__5pGfS",button:"BlockSearch_button__VOCQW",notification:"BlockSearch_notification__tXPeC"},u=n(184),d=function(e){var t=(0,o.rL)().tableTitles,n=void 0===t?[]:t,d=(0,c.useState)(""),m=(0,a.Z)(d,2),f=m[0],h=m[1],_=(0,c.useState)({name:""}),p=(0,a.Z)(_,2),v=p[0],k=p[1],x=(0,c.useState)(!1),j=(0,a.Z)(x,2),Z=j[0],I=j[1],B=(0,c.useState)([]),S=(0,a.Z)(B,2),C=S[0],y=S[1],w=[l.customSelect,Z&&l.isOpen].join(" ");function N(){I(!Z)}return(0,c.useEffect)((function(){0!==n.length&&y(function(e){var t=e.searchParam,n=void 0===t?"":t,i=e.searchQuery,a=void 0===i?null:i,c=e.data;return(void 0===c?[]:c).filter((function(e){return"number"===typeof e[n]?!(a&&!e[n].toString().toLowerCase().includes(a.toLowerCase())):"string"!==typeof e[n]||!(a&&!e[n].toLowerCase().includes(a.toLowerCase()))}))}({searchParam:"name",searchQuery:v.name,data:n.filter((function(e){return(null===e||void 0===e?void 0:e.filter)&&(null===e||void 0===e?void 0:e.visible)}))}))}),[v,n]),(0,c.useEffect)((function(){""===!f&&console.log(f)}),[f]),(0,c.useEffect)((function(){""===!v.name&&console.log(v.name)}),[v]),(0,u.jsx)("div",{className:l.filterContainer,children:(0,u.jsxs)("form",{className:l.filterForm,onSubmit:function(e){!function(e){e.preventDefault(),f&&v.name?s.Am.info("\u0412\u0438 \u0448\u0443\u043a\u0430\u043b\u0438: '".concat(f,"' \u0441\u0435\u0440\u0435\u0434 '").concat(v.name,"'")):s.Am.error("\u041d\u0435 \u0432\u0432\u0435\u0434\u0435\u043d\u043e \u0443\u0441\u0456\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0456\u0432 \u043f\u043e\u0448\u0443\u043a\u0443")}(e)},children:[(0,u.jsxs)("div",{className:w,onClick:N,children:[(0,u.jsx)("input",{className:l.inputParam,type:"text",placeholder:"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440",value:v.name,onChange:function(e){var t=e.target;k((0,i.Z)((0,i.Z)({},v),{},{name:t.value}))}}),(0,u.jsx)("ul",{className:l.selectList,children:C.map((function(e){return(0,u.jsx)("li",{className:l.selectItem,"data-title":e.dataTitle,onClick:function(t){!function(e){e.evt;var t=e.item;k(t),N()}({evt:t,item:e})},children:e.name},e.id)}))})]}),(0,u.jsx)("div",{className:l.customFounder,children:(0,u.jsx)("input",{className:l.inputFounder,type:"text",name:"searchQuery",value:f,placeholder:"\u041f\u043e\u0448\u0443\u043a",onChange:function(e){!function(e){var t=e.target;h(t.value)}(e)}})}),(0,u.jsx)("button",{className:l.button,type:"submit",children:(0,u.jsx)(r.Z,{iconId:"search",size:"24px"})})]})})},m=n(8586),f=n(4164),h=function(e){var t=(0,c.useState)(!1),n=(0,a.Z)(t,2),i=n[0],o=n[1],r=document.getElementById(e.id);if((0,c.useEffect)((function(){e.id?o(!0):o(!1)}),[e.id]),i)return f.createPortal(e.children,r)};h.propTypes={};var _=h,p="Action_actionBtn__1HEir",v="Action_listItem__BvVX7",k="Action_actionTitle__nQJRs",x=function(e){e.name;var t=e.status,n=void 0!==t&&t,i=e.iconId,a=void 0===i?"close":i,c=e.title,o=void 0===c?"title":c,r=e.onClick;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("li",{className:v,children:[(0,u.jsx)(m.Z,{iconId:a,size:"100%",iconSize:"28px",className:p,onClick:r,disabled:!n}),(0,u.jsx)("span",{className:k,children:o})]})})},j=function(e){var t=e.action,n=(0,o.rL)().blockTitle;return(0,u.jsx)(x,(0,i.Z)((0,i.Z)({},t),{},{onClick:function(){navigator.clipboard.writeText(n),s.Am.info('\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043e \u043a\u043e\u043f\u0456\u044e "'.concat(n,'"'))}}))},Z=n(5861),I=n(4687),B=n.n(I),S=n(2960),C=function(e){var t=e.action,n=(0,o.rL)().title,a=(0,S.d$)().appNotify,c="".concat(window.location,"/").concat(n);function r(){return(r=(0,Z.Z)(B().mark((function e(){var t;return B().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={title:"\u041f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044c",text:"\u041f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044c",url:c};try{navigator.share(t),a.success(t.title,"".concat(t.text,", ").concat(t.url))}catch(n){console.log(n),s.Am.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430: ".concat(n)),a.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043d\u0430\u0434\u0441\u0438\u043b\u0430\u043d\u043d\u0456","".concat(n))}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,u.jsx)(x,(0,i.Z)((0,i.Z)({},t),{},{onClick:function(){return r.apply(this,arguments)}}))},y=function(e){var t=e.action;return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(x,(0,i.Z)((0,i.Z)({},t),{},{onClick:function(e){}}))})},w=function(e){var t=e.action,n=(0,o.rL)().title,a=(0,S.d$)().appNotify;return(0,u.jsx)(x,(0,i.Z)((0,i.Z)({},t),{},{onClick:function(){a.info("\u0412\u0438\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445","\u0412\u0438 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u043b\u0438 \u0434\u0430\u043d\u0456 \u0456\u0437 \u0431\u043b\u043e\u043a\u0443 ".concat(n,"."))}}))},N=function(e){var t=e.action;return(0,u.jsx)(x,(0,i.Z)({},t))},g=function(e){var t=e.action;return(0,u.jsx)(x,(0,i.Z)({},t))},b=function(e){var t=e.action,n="".concat(window.location);return(0,u.jsx)(x,(0,i.Z)((0,i.Z)({},t),{},{onClick:function(){navigator.clipboard.writeText(n),s.Am.info("\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f \u0441\u043a\u043e\u043f\u0456\u0439\u043e\u0432\u0430\u043d\u0435 \u0434\u043e \u0431\u0443\u0444\u0435\u0440\u0443 \u043e\u0431\u043c\u0456\u043d\u0443")}}))},F=function(e){var t=e.action,n=(0,o.rL)().handleToggleBlockSearch;return(0,u.jsx)(x,(0,i.Z)((0,i.Z)({},t),{},{onClick:n}))},L=function(e){var t=e.action;return(0,u.jsx)(x,(0,i.Z)({},t))},T=function(e){var t=e.action;return(0,u.jsx)(x,(0,i.Z)({},t))},P=function(e){var t=e.action;return(0,u.jsx)(x,(0,i.Z)({},t))},A=function(e){var t=e.action;return(0,u.jsx)(x,(0,i.Z)({},t))},E="ActionsList_actionsList__6ChT6",O=function(e){var t=e.arr,n=void 0===t?[]:t,a={link:b,search:F,filter:g,copy:j,share:C,print:y,export:w,import:N,edit:L,delete:P,create:T,refresh:A},c=(0,u.jsx)(u.Fragment,{});return(0,u.jsx)("ul",{className:E,children:n.map((function(e){return e.name?(c=a[e.name],(0,u.jsx)(c,(0,i.Z)({action:e},e),e.name)):(0,u.jsx)(x,(0,i.Z)({},e),e.name)}))})},z={actionsBackdrop:"BlockActions_actionsBackdrop__QWF-u",actionsBackdropOpen:"BlockActions_actionsBackdropOpen__PvLbA",actionsContainer:"BlockActions_actionsContainer__Pbrz5",btn:"BlockActions_btn__eIOIX"},Q=function(){var e=(0,c.useState)(!1),t=(0,a.Z)(e,2),n=t[0],i=t[1],r=(0,o.rL)(),s=(0,c.useMemo)((function(){switch(r.actions){case"primary":return r.actionsPrimary;case"withFilter":return r.actionsWithFilter;default:return[]}}),[r.actions,r.actionsPrimary,r.actionsWithFilter]);function l(e){i(!n)}return(0,c.useEffect)((function(){function e(t){if("Escape"===t.code)return i(!1),void window.removeEventListener("keydown",e)}n?n&&window.addEventListener("keydown",e):window.removeEventListener("keydown",e)}),[n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(m.Z,{iconId:n?"close":"actions-h",size:"100%",iconSize:"24px",className:z.btn,onClick:l}),(0,u.jsx)(_,{id:r.iconId,children:(0,u.jsx)("div",{className:n?z.actionsBackdropOpen:z.actionsBackdrop,onClick:l,children:n&&(0,u.jsxs)("div",{className:z.actionsContainer,children:[(0,u.jsx)("span",{className:z.actionsTitle,children:'\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0456 \u0434\u0456\u0457 \u0431\u043b\u043e\u043a\u0443 "'.concat(r.title,'"')}),s.length>0&&(0,u.jsx)(O,{arr:s})]})})})]})},D="BlockHeaderSearch_header__fq2h1",H="BlockHeaderSearch_headerWithSearch__Vnm1m",W="BlockHeaderSearch_Light__qD5Ew",V="BlockHeaderSearch_Dark__OoJa3",X="BlockHeaderSearch_title__yFzIH",q=function(){var e=(0,o.rL)(),t=e.title,n=void 0===t?"Title":t,i=e.iconId,a=void 0===i?"info":i,c=e.isSearch,s=e.isDarkTheme,l=e.actions,m=e.headerStyles,f=e.headerClassName;return(0,u.jsxs)("div",{className:[c?H:D,s?V:W,f].join(" "),style:m,children:[(0,u.jsx)(r.Z,{iconId:a,size:"24px"}),c&&(0,u.jsx)(d,{}),n&&(0,u.jsx)("span",{className:X,children:(0,u.jsx)("span",{title:n,children:n})}),l&&(0,u.jsx)(Q,{})]})},J=n(9434),U=n(6351),$="Block_block__l4rYQ",G="Block_blockDark__wuUze",M="Block_footer__0j8tQ",R="Block_overflow__I1+3b",Y="Block_content__VVaX5",K="Block_inWork__m6rkC",ee=function(e){var t=e.children,n=e.footerChildren,r=e.title,s=void 0===r?"Title":r,l=e.iconId,d=void 0===l?"info":l,m=e.footer,f=void 0===m||m,h=e.header,_=void 0===h||h,p=e.style,v=void 0===p?{}:p,k=e.headerStyles,x=void 0===k?{}:k,j=e.className,Z=void 0===j?"":j,I=(0,c.useState)(!1),B=(0,a.Z)(I,2),S=B[0],C=B[1],y=(0,J.v9)(U.hO).isDarkTheme,w=(0,c.useState)(!1),N=(0,a.Z)(w,2),g=N[0],b=N[1],F=[y?G:$,Z].join(" ");var L={isSearch:S,isFormDisabled:g,isDarkTheme:y},T={handleToggleBlockSearch:function(){C(!S)},handleToggleEditForm:function(){b(!g)}};return console.log("block '".concat(s,"'inicialize")),(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(o.ZP,(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},e),T),L),{},{children:(0,u.jsxs)("div",{className:F,style:v,children:[_&&(0,u.jsx)(q,{style:x}),(0,u.jsx)("div",{className:Y,id:d,children:(0,u.jsxs)("div",{className:R,children:[t,!t&&(0,u.jsx)("div",{className:K,children:(0,u.jsx)("span",{children:"In work ..."})})]})}),f&&(0,u.jsx)("div",{className:M,children:n})]})}))})}},3579:function(e,t,n){n.d(t,{ZP:function(){return l},rL:function(){return s}});var i=n(1413),a=n(2791),c={actionsPrimary:[{name:"link",title:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f",iconId:"link",status:!0},{name:"copy",title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438",iconId:"copy",status:!1},{name:"share",title:"\u041f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044c",iconId:"share",status:!0},{name:"refresh",title:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438",iconId:"refresh",status:!1},{name:"edit",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",iconId:"edit",status:!0},{name:"delete",title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",iconId:"delete",status:!1},{name:"create",title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",iconId:"plus",status:!1},{name:"print",title:"\u0414\u0440\u0443\u043a",iconId:"print",status:!1},{name:"export",title:"\u0415\u043a\u0441\u043f\u043e\u0440\u0442",iconId:"upload",status:!1},{name:"import",title:"\u0406\u043c\u043f\u043e\u0440\u0442",iconId:"download",status:!1}],actionsWithFilter:[{name:"search",title:"\u041f\u043e\u0448\u0443\u043a",iconId:"search",status:!0},{name:"filter",title:"\u0424\u0456\u043b\u044c\u0442\u0440",iconId:"filter-off",status:!1},{name:"link",title:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f",iconId:"link",status:!0},{name:"copy",title:"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438",iconId:"copy",status:!1},{name:"share",title:"\u041f\u043e\u0434\u0456\u043b\u0438\u0442\u0438\u0441\u044c",iconId:"share",status:!0},{name:"refresh",title:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438",iconId:"refresh",status:!1},{name:"edit",title:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438",iconId:"edit",status:!1},{name:"delete",title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",iconId:"delete",status:!1},{name:"create",title:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438",iconId:"plus",status:!1},{name:"print",title:"\u0414\u0440\u0443\u043a",iconId:"print",status:!1},{name:"export",title:"\u0415\u043a\u0441\u043f\u043e\u0440\u0442",iconId:"upload",status:!1},{name:"import",title:"\u0406\u043c\u043f\u043e\u0440\u0442",iconId:"download",status:!1}]},o=n(184),r=(0,a.createContext)(),s=function(){return(0,a.useContext)(r)},l=function(e){return(0,o.jsx)(r.Provider,{value:(0,i.Z)((0,i.Z)({},e),c),children:e.children})}}}]);
//# sourceMappingURL=593.02673103.chunk.js.map